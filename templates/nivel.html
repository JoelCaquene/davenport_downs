{% extends "base.html" %}
{% load static %}

{% block title %}Níveis de Investimento - Plataforma{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="page-header">
        <h1>CURRAL DE COMPRA</h1>
    </div>
    
    <div class="level-list row justify-content-start">
        {% for level in levels %}
        <div class="col-6 mb-3">
            <div class="level-item {% if level.id in user_levels %}active-border{% endif %}">
                
                <h3 class="level-title">{{ level.name }}</h3>
                
                <div class="level-details">
                    <div class="data-row">
                        <span class="label">Depósito</span>
                        <strong class="value deposit-value color-red-dark">KZ {{ level.deposit_value }}</strong>
                    </div>
                    <div class="data-row">
                        <span class="label">Diário</span>
                        <strong class="value daily-gain color-red">KZ {{ level.daily_gain }}</strong>
                    </div>
                    <div class="data-row">
                        <span class="label">Mensal</span>
                        <strong class="value monthly-gain color-blue">KZ {{ level.monthly_gain }}</strong>
                    </div>
                    <div class="data-row">
                        <span class="label">Ciclo</span>
                        <strong class="value cycle-days color-red-dark">{{ level.cycle_days }} dias</strong>
                    </div>
                </div>
                
                {% if level.id in user_levels %}
                    <span class="active-level pulse-effect">Nível Ativo</span>
                {% else %}
                    <form method="post" action="{% url 'nivel' %}">
                        {% csrf_token %}
                        <input type="hidden" name="level_id" value="{{ level.id }}">
                        <button type="submit" class="buy-button-style hover-effect">Comprar</button>
                    </form>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    /* 1. FUNDO BRANCO EM TODO ARQUIVO */
    body {
        background-color: #FFFFFF !important; 
        font-family: Arial, sans-serif;
    }
    
    /* Cores personalizadas conforme a imagem "BOM" */
    .color-red-dark { color: #8B0000; } /* Cor escura próxima ao vermelho da imagem */
    .color-red { color: #FF0000; }
    .color-blue { color: #0000CD; } /* Cor escura próxima ao azul da imagem */
    .color-black { color: #000000; }

    /* Contêiner Principal e Responsividade */
    .container {
        max-width: 450px; 
        padding: 0 5px;
    }
    .level-list {
        margin-left: -5px; 
        margin-right: -5px;
    }
    .col-6 {
        padding-left: 5px;
        padding-right: 5px;
    }

    /* Cabeçalho */
    .page-header {
        text-align: center;
        padding: 20px 0;
        background: #FFFFFF; 
        border-bottom: 2px solid #e9ecef;
        margin-bottom: 20px;
    }
    .page-header h1 {
        color: #007bff;
        font-weight: 700;
        font-size: 1.6rem;
        margin: 0;
    }

    /* Estilo do Card (Obrigatório: Fundo Branco) */
    .level-item {
        background: #FFFFFF;
        border: 2px solid #007bff; /* Borda externa azul conforme a imagem "BOM" */
        padding: 5px; 
        border-radius: 0; /* Sem bordas arredondadas para parecer mais quadrado */
        box-shadow: none; /* Remove sombra */
        transition: none;
        height: auto;
        display: flex;
        flex-direction: row; /* Principalmente horizontal */
        align-items: center; /* Alinha verticalmente os elementos */
        justify-content: space-between;
        font-size: 0.7rem; /* Letras pequenas */
    }

    /* Título do Nível (Nome do Nível, se necessário) */
    .level-title {
        display: none; /* Remove o título do nível para seguir o padrão minimalista */
    }

    /* Detalhes (Obrigatório: Horizontal e Pequeno) */
    .level-details {
        display: flex;
        flex-direction: row; /* Coloca os detalhes lado a lado */
        justify-content: space-around; /* Distribui o espaço entre os itens */
        align-items: flex-end;
        width: 80%; /* Ocupa a maior parte do card */
        padding: 0;
        margin: 0;
    }

    /* Cada par de dado (Depósito/Valor, etc.) */
    .data-row {
        display: flex;
        flex-direction: column; /* Coloca o Label (em cima) e o Valor (embaixo) */
        text-align: center;
        margin: 0 2px;
    }

    .label {
        font-size: 0.7rem; /* Letras pequenas */
        font-weight: bold;
        color: #000000; /* Preto para os títulos, conforme imagem */
        margin-bottom: 2px;
    }

    .value {
        font-size: 0.8rem; /* Um pouco maior para o valor, em negrito */
        font-weight: bold;
    }

    /* ESTILO DO BOTÃO DE COMPRA (COMPRAR) */
    .buy-button-style {
        background-color: #007bff; /* Azul de fundo do botão conforme imagem */
        color: white;
        padding: 8px 5px;
        border: none;
        border-radius: 0;
        width: auto; /* Ajusta a largura para o conteúdo */
        font-size: 0.7rem; /* Letras pequenas */
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s;
        height: 100%; /* Ocupa a altura do card */
        display: flex;
        align-items: center;
        text-align: center;
    }

    .buy-button-style:hover {
        background-color: #0056b3;
    }

    /* ESTILO DE NÍVEL ATIVO */
    .active-level {
        background-color: #ffc107;
        color: #212529;
        padding: 8px 5px;
        border-radius: 0;
        width: auto;
        font-size: 0.7rem; 
        font-weight: bold;
        height: 100%;
        display: flex;
        align-items: center;
        text-align: center;
    }
    
    /* REMOÇÃO DOS ELEMENTOS NÃO SOLICITADOS */
    /* Removido elementos da estrutura antiga que já estão fora do HTML (level-main-info, level-icon, detail-icon) */

</style>
{% endblock %}
